--------------------------------------------------------
--  File created - Thursday-January-23-2020   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Function NEW_BATCH_TRAN_ID
--------------------------------------------------------
CREATE OR REPLACE EDITIONABLE FUNCTION new_batch_tran_id
(
  in_batch_id IN  NUMBER 
) RETURN NUMBER AS
    vBatchTranId  NUMBER(4);
BEGIN
    SELECT MAX(batch_tran_id)
    INTO vBatchTranId
    FROM erp_gl_transaction
    WHERE batch_id = in_batch_id;
    
    vBatchTranId := NVL(vBatchTranId, 0) + 1;
    RETURN vBatchTranId;
END;
/
